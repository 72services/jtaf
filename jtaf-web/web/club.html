<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>Edit club</title>
        <link rel="stylesheet" href="css/jtaf.css">
        <script src="javascript/util.js"></script>
        <script>
            var club;

            function loadData() {
                var id = param().id;
                if (id === undefined) {
                    club = new Object();
                    el("club_abbrevation").focus();
                } else {
                    xhrGet("/jtaf/res/clubs/" + id, function(response) {
                        parseAndFill(response);
                    });
                }
            }

            function parseAndFill(response) {
                club = JSON.parse(response);
                fillForm();
            }

            function fillForm() {
                el("club_id").value = club.id;
                el("club_abbrevation").value = club.abbrevation;
                el("club_name").value = club.name;
                el("club_name").focus();
            }

            function save() {
                fillClub();
                xhrPost("/jtaf/res/clubs/", function(response) {
                    parseAndFill(response);
                    info("Club saved");
                }, club);
            }

            function fillClub() {
                club.abbrevation = el("club_abbrevation").value;
                club.name = el("club_name").value;
            }

            function deleteClub(id) {
                xhrDelete("/jtaf/res/clubs/" + id, function() {
                    loadData();
                    info("Club deleted");
                });
            }
        </script>
    </head>
    <body onload="loadData();">
        <div id="main">
            <div id="navigation">
                <script src="javascript/navigation.js"></script>
            </div>

            <h1>Club</h1>

            <form action="javascript:save();">

                <table class="input">
                    <tr>
                        <td>Id</td>
                        <td><input type="text" id="club_id" readonly disabled /></td>
                    </tr>
                    <tr>
                        <td>Abbrevation</td>
                        <td><input type="text" id="club_abbrevation" required /></td>
                    </tr>
                    <tr>
                        <td>Name</td>
                        <td><input type="text" id="club_name" required /></td>
                    </tr>
                </table>

                <p>
                    <input type="submit" value="Save" />&nbsp;
                    <a href="index.html">Back</a>
                </p>

            </form>

        </div>
    </body>
</html>
